# Greek Learning Telegram Bot - Design Document

**–î–∞—Ç–∞:** 2026-01-30
**–°—Ç–∞—Ç—É—Å:** Design Complete, Ready for Implementation

## –û–±–∑–æ—Ä

Telegram-–±–æ—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –≥—Ä–µ—á–µ—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ä—É—á–Ω—ã–µ –∫–≤–∏–∑—ã –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –ü–æ—Å—Ç–∏–Ω–≥ —É—á–µ–±–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –≤ –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã –∏ —Ç–æ–ø–∏–∫–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è (–∫–æ–º–∞–Ω–¥—ã, –∏–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤, –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î)

## –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
1. **–ö–≤–∏–∑—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º:**
   - –§–æ—Ä–º–∞—Ç GR‚ÜíRU: –≥—Ä–µ—á–µ—Å–∫–æ–µ —Å–ª–æ–≤–æ/—Ñ—Ä–∞–∑–∞ ‚Üí 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
   - –§–æ—Ä–º–∞—Ç RU‚ÜíGR: —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ ‚Üí 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞ –≥—Ä–µ—á–µ—Å–∫–æ–º
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:
     - –î–ª—è —Å–ª–æ–≤: 3 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–∞ –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤ –∏–∑ –ë–î
     - –î–ª—è —Ñ—Ä–∞–∑: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ö–æ–∂–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—è–º–∏

2. **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**
   - `/quiz` - –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ –∑–∞–ø—Ä–æ—Å—É
   - `/quiz_session` - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–µ—Å—Å–∏—è (–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è `/stop`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–∫–≤–∏–∑–æ–≤:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ—Å—Å–∏–∏
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 –º–∏–Ω—É—Ç)

4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–ª–æ–≤—É
   - –°–ª–æ–≤–∞ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ <70% –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —á–∞—â–µ
   - –ö–æ–º–∞–Ω–¥—ã: `/stats`, `/difficult`, `/progress`

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –≥—Ä—É–ø–ø:
1. **–ü–æ—Å—Ç–∏–Ω–≥ —É—á–µ–±–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Å—Ç–∏–Ω–≥ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ 30 –º–∏–Ω—É—Ç)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö (—Ä–∞–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–æ–ø–∏–∫–∞—Ö)
   - –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π: —Å–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤, –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤:**
   - `/setup` –≤ –≥—Ä—É–ø–ø–µ/—Ç–æ–ø–∏–∫–µ - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Å—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏: —Ç–∏–ø –∑–∞–¥–∞–Ω–∏–π, –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—Å—Ç–∏–Ω–≥–∞, –∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–º (whitelist –∞–¥–º–∏–Ω–æ–≤ –ø–æ Telegram username):**
   - `/add` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑—ã —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥
   - `/import` - –∏–º–ø–æ—Ä—Ç –∏–∑ Excel/CSV/JSON —Ñ–∞–π–ª–æ–≤
   - `/export` - —ç–∫—Å–ø–æ—Ä—Ç —Å–ª–æ–≤–∞—Ä—è –≤ Excel
   - `/template` - –ø–æ–ª—É—á–∏—Ç—å –ø—É—Å—Ç–æ–π —à–∞–±–ª–æ–Ω Excel –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ SQLite –ë–î —á–µ—Ä–µ–∑ DB Browser for SQLite

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏:**
   - `/add_task` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞–Ω–∏—è
   - `/list_tasks` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π

3. **Whitelist –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
   - –°–ø–∏—Å–æ–∫ –≤ `config.py`: `ADMIN_USERNAMES = ["@username"]`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Telegram Bot:** python-telegram-bot
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite
- **Excel –æ–±—Ä–∞–±–æ—Ç–∫–∞:** openpyxl
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:** APScheduler (–¥–ª—è –∫—Ä–æ–Ω-–∑–∞–¥–∞—á)
- **Python:** 3.10+

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
greek-learning-bot/
‚îú‚îÄ‚îÄ bot.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–∫–µ–Ω, –∞–¥–º–∏–Ω—ã, –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã)
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ .env.example               # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                 # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è git
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ db.py                  # –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ models.py              # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ —Å—Ö–µ–º—ã
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py               # –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã (/add, /import, /export)
‚îÇ   ‚îú‚îÄ‚îÄ quiz.py                # –ö–≤–∏–∑—ã –≤ –ª–∏—á–∫–µ (/quiz, /quiz_session)
‚îÇ   ‚îú‚îÄ‚îÄ group.py               # –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ stats.py               # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (/stats, /difficult, /progress)
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ quiz_service.py        # –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–≤–∏–∑–æ–≤, –≤—ã–±–æ—Ä —Å–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ scheduler_service.py   # –ö—Ä–æ–Ω-–∑–∞–¥–∞—á–∏ (–∞–≤—Ç–æ–∫–≤–∏–∑—ã, –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ—Å—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ stats_service.py       # –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ task_service.py        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø–æ—Å—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ wrong_answers.py       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ import_export.py       # –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç Excel/CSV/JSON
‚îÇ   ‚îî‚îÄ‚îÄ validators.py          # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ plans/
‚îÇ       ‚îî‚îÄ‚îÄ 2026-01-30-greek-learning-bot-design.md
‚îÇ
‚îî‚îÄ‚îÄ tests/                      # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ test_quiz_service.py
    ‚îî‚îÄ‚îÄ test_wrong_answers.py
```

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

**–¢–∞–±–ª–∏—Ü–∞ `words`:**
```sql
CREATE TABLE words (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    greek TEXT NOT NULL,
    russian TEXT NOT NULL,
    type TEXT NOT NULL CHECK(type IN ('word', 'phrase')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER  -- Telegram user_id –∞–¥–º–∏–Ω–∞
);
```

**–¢–∞–±–ª–∏—Ü–∞ `users`:**
```sql
CREATE TABLE users (
    user_id INTEGER PRIMARY KEY,  -- Telegram user_id
    username TEXT,
    first_name TEXT,
    quiz_session_active BOOLEAN DEFAULT 0,
    auto_quiz_enabled BOOLEAN DEFAULT 1,
    questions_per_session INTEGER DEFAULT 5,
    session_interval_minutes INTEGER DEFAULT 15,
    last_auto_quiz TIMESTAMP,
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–¢–∞–±–ª–∏—Ü–∞ `user_stats`:**
```sql
CREATE TABLE user_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    word_id INTEGER NOT NULL,
    correct_answers INTEGER DEFAULT 0,
    total_answers INTEGER DEFAULT 0,
    last_asked TIMESTAMP,
    difficulty_multiplier REAL DEFAULT 1.0,
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    FOREIGN KEY (word_id) REFERENCES words(id),
    UNIQUE(user_id, word_id)
);
```

**–¢–∞–±–ª–∏—Ü–∞ `chat_contexts`:**
```sql
CREATE TABLE chat_contexts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    chat_id INTEGER NOT NULL,
    chat_type TEXT NOT NULL CHECK(chat_type IN ('private', 'group', 'supergroup')),
    topic_id INTEGER,  -- NULL –µ—Å–ª–∏ –Ω–µ —Ç–æ–ø–∏–∫
    enabled BOOLEAN DEFAULT 1,
    task_type TEXT CHECK(task_type IN ('conjugation', 'translation', 'vocabulary', 'custom')),
    schedule_interval_minutes INTEGER DEFAULT 30,
    last_posted TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(chat_id, topic_id)
);
```

**–¢–∞–±–ª–∏—Ü–∞ `group_tasks`:**
```sql
CREATE TABLE group_tasks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    task_type TEXT NOT NULL,
    template TEXT NOT NULL,  -- –ù–∞–ø—Ä–∏–º–µ—Ä: "–ü—Ä–æ—Å–ø—Ä—è–≥–∞–π –≥–ª–∞–≥–æ–ª {word}"
    target_word_id INTEGER,  -- NULL –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–ª–æ–≤—É
    correct_answer TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER,
    FOREIGN KEY (target_word_id) REFERENCES words(id)
);
```

**–¢–∞–±–ª–∏—Ü–∞ `admins`:**
```sql
CREATE TABLE admins (
    user_id INTEGER PRIMARY KEY,
    username TEXT NOT NULL,
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### 1. Quiz Service (services/quiz_service.py)

**–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:**
- –í—ã–±–æ—Ä —Å–ª–æ–≤–∞ –¥–ª—è –∫–≤–∏–∑–∞ —Å —É—á–µ—Ç–æ–º –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é 4 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ (1 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π + 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö)
- –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ GR‚ÜíRU –∏ RU‚ÜíGR

**–ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ —Å–ª–æ–≤–∞:**
```python
def select_word_for_quiz(user_id):
    # 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ª–æ–≤–∞ –∏–∑ –ë–î
    # 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –ø–æ–ª—É—á–∏—Ç—å difficulty_multiplier –∏–∑ user_stats
    # 3. –ï—Å–ª–∏ —Å–ª–æ–≤–∞ –Ω–µ—Ç –≤ user_stats - difficulty_multiplier = 1.0
    # 4. –í—ã—á–∏—Å–ª–∏—Ç—å –≤–µ—Å: weight = difficulty_multiplier * random()
    # 5. –í—ã–±—Ä–∞—Ç—å —Å–ª–æ–≤–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –≤–µ—Å–æ–º
    # 6. –í–µ—Ä–Ω—É—Ç—å —Å–ª–æ–≤–æ
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
```python
def update_difficulty(user_id, word_id, is_correct):
    stats = get_user_stats(user_id, word_id)
    if stats.total_answers >= 3:  # –ú–∏–Ω–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        success_rate = stats.correct_answers / stats.total_answers
        if success_rate < 0.7:
            stats.difficulty_multiplier = 2.0  # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á–∞—â–µ
        elif success_rate > 0.9:
            stats.difficulty_multiplier = 0.5  # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∂–µ
        else:
            stats.difficulty_multiplier = 1.0  # –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞
```

### 2. Wrong Answers Generator (utils/wrong_answers.py)

**–î–ª—è —Å–ª–æ–≤:**
```python
def generate_wrong_answers_for_word(correct_word_id, count=3):
    # –ë–µ—Ä–µ–º 3 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–ª–æ–≤–∞ –∏–∑ –ë–î (–∏—Å–∫–ª—é—á–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ö –ø–µ—Ä–µ–≤–æ–¥—ã
```

**–î–ª—è —Ñ—Ä–∞–∑ (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):**
```python
def generate_wrong_answers_for_phrase(correct_phrase, count=3):
    # –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–º–µ–Ω–∏—Ç—å 1-2 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–ª–æ–≤–∞ –Ω–∞ –ø–æ—Ö–æ–∂–∏–µ –∏–∑ —Å–ª–æ–≤–∞—Ä—è
    # –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤
    # –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –≥–ª–∞–≥–æ–ª–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    #
    # –î–ª—è MVP: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞
    # –í –±—É–¥—É—â–µ–º: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –¥–ª—è –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

### 3. Scheduler Service (services/scheduler_service.py)

**–ó–∞–¥–∞—á–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:**

1. **–ê–≤—Ç–æ–∫–≤–∏–∑—ã –≤ –ª–∏—á–∫—É:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
for user in users_with_auto_quiz_enabled():
    if (now - user.last_auto_quiz) >= user.session_interval_minutes:
        start_auto_quiz_session(user.user_id, user.questions_per_session)
        user.last_auto_quiz = now
```

2. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
for context in active_chat_contexts():
    if (now - context.last_posted) >= context.schedule_interval_minutes:
        task = select_random_task(context.task_type)
        post_task_to_chat(context.chat_id, context.topic_id, task)
        context.last_posted = now
```

### 4. Conversation Handlers

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞ (/add):**

```
States: WAITING_GREEK ‚Üí WAITING_RUSSIAN ‚Üí WAITING_TYPE ‚Üí DONE

1. User: /add
2. Bot: "–í–≤–µ–¥–∏ —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑—É –Ω–∞ –≥—Ä–µ—á–µ—Å–∫–æ–º:" [State: WAITING_GREEK]
3. User: "ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±"
4. Bot: "–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π:" [State: WAITING_RUSSIAN]
5. User: "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ"
6. Bot: "–≠—Ç–æ —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑–∞?" [–ö–Ω–æ–ø–∫–∏: –°–ª–æ–≤–æ | –§—Ä–∞–∑–∞] [State: WAITING_TYPE]
7. User: [–Ω–∞–∂–∏–º–∞–µ—Ç "–§—Ä–∞–∑–∞"]
8. Bot: "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ! ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ± ‚Üí –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ (—Ñ—Ä–∞–∑–∞)" [State: DONE]
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (/setup):**

```
States: WAITING_TASK_TYPE ‚Üí WAITING_INTERVAL ‚Üí DONE

1. Admin –≤ –≥—Ä—É–ø–ø–µ/—Ç–æ–ø–∏–∫–µ: /setup
2. Bot: "–ö–∞–∫–æ–π —Ç–∏–ø –∑–∞–¥–∞–Ω–∏–π –ø–æ—Å—Ç–∏—Ç—å –≤ —ç—Ç–æ—Ç —á–∞—Ç?" [–ö–Ω–æ–ø–∫–∏: –°–ø—Ä—è–∂–µ–Ω–∏–µ | –ü–µ—Ä–µ–≤–æ–¥ | –õ–µ–∫—Å–∏–∫–∞]
3. Admin: [–Ω–∞–∂–∏–º–∞–µ—Ç "–°–ø—Ä—è–∂–µ–Ω–∏–µ"]
4. Bot: "–ö–∞–∫ —á–∞—Å—Ç–æ –ø–æ—Å—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è?" [–ö–Ω–æ–ø–∫–∏: 15 –º–∏–Ω | 30 –º–∏–Ω | 1 —á–∞—Å | –î—Ä—É–≥–æ–µ]
5. Admin: [–Ω–∞–∂–∏–º–∞–µ—Ç "30 –º–∏–Ω"]
6. Bot: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ó–∞–¥–∞–Ω–∏—è —Ç–∏–ø–∞ '–°–ø—Ä—è–∂–µ–Ω–∏–µ' –±—É–¥—É—Ç –ø–æ—Å—Ç–∏—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç."
```

## –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤:

**Excel (.xlsx):**
```
| Greek      | Russian        | Type   |
|------------|----------------|--------|
| Œ∫Œ¨ŒΩœâ       | –¥–µ–ª–∞—Ç—å         | word   |
| ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±   | –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ    | phrase |
```

**CSV (.csv):**
```csv
greek,russian,type
Œ∫Œ¨ŒΩœâ,–¥–µ–ª–∞—Ç—å,word
ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±,–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ,phrase
```

**JSON (.json):**
```json
[
  {"greek": "Œ∫Œ¨ŒΩœâ", "russian": "–¥–µ–ª–∞—Ç—å", "type": "word"},
  {"greek": "ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±", "russian": "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "type": "phrase"}
]
```

### –ö–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞:

- `/import` + –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª (.xlsx/.csv/.json) - –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
- `/export` - —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ —Å–ª–æ–≤–∞—Ä—è –≤ Excel
- `/template` - –ø–æ–ª—É—á–∏—Ç—å –ø—É—Å—Ç–æ–π —à–∞–±–ª–æ–Ω Excel –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### –°–ø–æ—Å–æ–±—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤ (—Å–≤–æ–¥–∫–∞):

1. **–ß–µ—Ä–µ–∑ –±–æ—Ç–∞** - `/add` (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥) - —É–¥–æ–±–Ω–æ –¥–ª—è 1-5 —Å–ª–æ–≤
2. **–ß–µ—Ä–µ–∑ —Ñ–∞–π–ª** - `/import` + Excel/CSV/JSON - —É–¥–æ–±–Ω–æ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
3. **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø** - DB Browser for SQLite ‚Üí `database/words.db` - –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è

### –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π:

1. **Conjugation (–°–ø—Ä—è–∂–µ–Ω–∏–µ):**
   - Template: "–ü—Ä–æ—Å–ø—Ä—è–≥–∞–π –≥–ª–∞–≥–æ–ª {word} –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –≤—Ä–µ–º–µ–Ω–∏"
   - –•—Ä–∞–Ω–∏—Ç—Å—è: target_word_id, correct_answer (—Ç–µ–∫—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ø—Ä—è–∂–µ–Ω–∏–µ–º)

2. **Translation (–ü–µ—Ä–µ–≤–æ–¥):**
   - Template: "–ü–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ –≥—Ä–µ—á–µ—Å–∫–∏–π: {russian_phrase}"
   - –•—Ä–∞–Ω–∏—Ç—Å—è: target_word_id, correct_answer

3. **Vocabulary (–õ–µ–∫—Å–∏–∫–∞):**
   - Template: "–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç '{russian}'?"
   - –•—Ä–∞–Ω–∏—Ç—Å—è: target_word_id, correct_answer

4. **Custom (–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ):**
   - Template: –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è
   - –•—Ä–∞–Ω–∏—Ç—Å—è: correct_answer (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü–æ—Å—Ç–∏–Ω–≥ –∑–∞–¥–∞–Ω–∏–π:

```python
def post_task_to_chat(chat_id, topic_id, task):
    message = format_task_message(task)
    if topic_id:
        bot.send_message(chat_id, message, message_thread_id=topic_id)
    else:
        bot.send_message(chat_id, message)
```

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

**–ö–≤–∏–∑—ã:**
- `/quiz` - –ø–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å
- `/quiz_session` - –Ω–∞—á–∞—Ç—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é —Å–µ—Å—Å–∏—é
- `/stop` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∫–≤–∏–∑—ã (–∏–Ω—Ç–µ—Ä–≤–∞–ª, –∫–æ–ª-–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤)
- `/auto_on` - –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–≤–∏–∑—ã
- `/auto_off` - –≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–≤–∏–∑—ã

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- `/stats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–≤—Å–µ–≥–æ, –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞)
- `/difficult` - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤ (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è)
- `/progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é

**–û–±—â–∏–µ:**
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `/help` - –ø–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

### –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã (whitelist):

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–º:**
- `/add` - –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ/—Ñ—Ä–∞–∑—É (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)
- `/import` - –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞
- `/export` - —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å
- `/template` - –ø–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω Excel

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è–º–∏:**
- `/add_task` - –¥–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø
- `/list_tasks` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏:**
- `/setup` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ/—Ç–æ–ø–∏–∫–µ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Å–∞–º–æ–π –≥—Ä—É–ø–ø–µ)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**config.py:**
```python
import os

# Telegram Bot Token
BOT_TOKEN = os.getenv('BOT_TOKEN', 'your-token-here')

# Admin whitelist (Telegram usernames)
ADMIN_USERNAMES = [
    "@your_username",
    # –î–æ–±–∞–≤—å –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–æ–≤ –∑–¥–µ—Å—å
]

# Database
DATABASE_PATH = "database/words.db"

# Default settings
DEFAULT_QUESTIONS_PER_SESSION = 5
DEFAULT_SESSION_INTERVAL_MINUTES = 15
DEFAULT_GROUP_POST_INTERVAL_MINUTES = 30

# Quiz settings
MIN_ANSWERS_FOR_DIFFICULTY_CALC = 3  # –ú–∏–Ω–∏–º—É–º –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
DIFFICULTY_MULTIPLIER_LOW = 0.5      # –õ–µ–≥–∫–∏–µ —Å–ª–æ–≤–∞
DIFFICULTY_MULTIPLIER_NORMAL = 1.0   # –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
DIFFICULTY_MULTIPLIER_HIGH = 2.0     # –°–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞
SUCCESS_RATE_THRESHOLD_HIGH = 0.9    # > 90% = –ª–µ–≥–∫–æ–µ —Å–ª–æ–≤–æ
SUCCESS_RATE_THRESHOLD_LOW = 0.7     # < 70% = —Å–ª–æ–∂–Ω–æ–µ —Å–ª–æ–≤–æ
```

**.env.example:**
```
BOT_TOKEN=your_telegram_bot_token_here
```

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Implementation Plan)

### –§–∞–∑–∞ 1: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
**–û—Ü–µ–Ω–∫–∞: 2-3 —á–∞—Å–∞**

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
   - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .gitignore

2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `database/models.py` (—Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `database/db.py` (–º–µ–Ω–µ–¥–∂–µ—Ä –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏)
   - –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –°–æ–∑–¥–∞—Ç—å `config.py` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - –°–æ–∑–¥–∞—Ç—å `.env.example`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

4. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
   - –°–æ–∑–¥–∞—Ç—å `bot.py` —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –±–æ—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram API

### –§–∞–∑–∞ 2: –ö–≤–∏–∑—ã –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
**–û—Ü–µ–Ω–∫–∞: 4-5 —á–∞—Å–æ–≤**

1. Quiz Service
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `services/quiz_service.py`
   - –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ–≤–∞ (–ø–æ–∫–∞ –±–µ–∑ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 4 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
   - –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ GR‚ÜíRU –∏ RU‚ÜíGR

2. Wrong Answers Generator
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `utils/wrong_answers.py`
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è —Å–ª–æ–≤ (—Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑ –ë–î)
   - –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–∞–∑

3. Quiz Handler
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `handlers/quiz.py`
   - –ö–æ–º–∞–Ω–¥–∞ `/quiz` - –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (inline keyboard)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

4. Quiz Session
   - –ö–æ–º–∞–Ω–¥–∞ `/quiz_session` - –∑–∞–ø—É—Å–∫ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
   - –ö–æ–º–∞–Ω–¥–∞ `/stop` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏ (ConversationHandler)

5. –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `services/stats_service.py`
   - –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `user_stats`
   - –ö–æ–º–∞–Ω–¥–∞ `/stats` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –§–∞–∑–∞ 3: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
**–û—Ü–µ–Ω–∫–∞: 3-4 —á–∞—Å–∞**

1. Admin Middleware
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ whitelist –∞–¥–º–∏–Ω–æ–≤ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥
   - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@admin_only` –¥–ª—è handlers

2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `handlers/admin.py`
   - –ö–æ–º–∞–Ω–¥–∞ `/add` —Å ConversationHandler
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ (–≥—Ä–µ—á–µ—Å–∫–∏–π ‚Üí —Ä—É—Å—Å–∫–∏–π ‚Üí —Ç–∏–ø)
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

3. –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `utils/import_export.py`
   - –ö–æ–º–∞–Ω–¥–∞ `/import` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ (Excel/CSV/JSON)
   - –ö–æ–º–∞–Ω–¥–∞ `/export` - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
   - –ö–æ–º–∞–Ω–¥–∞ `/template` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

### –§–∞–∑–∞ 4: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –∞–≤—Ç–æ–∫–≤–∏–∑—ã
**–û—Ü–µ–Ω–∫–∞: 2-3 —á–∞—Å–∞**

1. Scheduler Service
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `services/scheduler_service.py`
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ APScheduler
   - Job –¥–ª—è –∞–≤—Ç–æ–∫–≤–∏–∑–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)

2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ö–æ–º–∞–Ω–¥—ã `/auto_on` –∏ `/auto_off`
   - –ö–æ–º–∞–Ω–¥–∞ `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∏ –∫–æ–ª-–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ (ConversationHandler)
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`

3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏
   - –õ–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ–∫–≤–∏–∑–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Quiz Handler

### –§–∞–∑–∞ 5: –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
**–û—Ü–µ–Ω–∫–∞: 3-4 —á–∞—Å–∞**

1. Chat Context Management
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `handlers/group.py`
   - –ö–æ–º–∞–Ω–¥–∞ `/setup` –≤ –≥—Ä—É–ø–ø–µ (ConversationHandler)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–∞ –∑–∞–¥–∞–Ω–∏–π –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `chat_contexts`

2. Task Service
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `services/task_service.py`
   - –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ —Ç–∏–ø—É
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
   - –ü–æ—Å—Ç–∏–Ω–≥ –≤ —á–∞—Ç (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–æ–ø–∏–∫–æ–≤)

3. Task Management
   - –ö–æ–º–∞–Ω–¥–∞ `/add_task` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞–Ω–∏—è
   - –ö–æ–º–∞–Ω–¥–∞ `/list_tasks` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `group_tasks`

4. Scheduler –¥–ª—è –≥—Ä—É–ø–ø
   - Job –¥–ª—è –ø–æ—Å—Ç–∏–Ω–≥–∞ –∑–∞–¥–∞–Ω–∏–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Task Service

### –§–∞–∑–∞ 6: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–û—Ü–µ–Ω–∫–∞: 2-3 —á–∞—Å–∞**

1. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
   - –û–±–Ω–æ–≤–∏—Ç—å `services/stats_service.py`
   - –†–∞—Å—á–µ—Ç difficulty_multiplier –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `quiz_service.py` (–≤—ã–±–æ—Ä —Å–ª–æ–≤–∞ —Å —É—á–µ—Ç–æ–º –≤–µ—Å–∞)

2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ö–æ–º–∞–Ω–¥–∞ `/difficult` - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤
   - –ö–æ–º–∞–Ω–¥–∞ `/progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –Ω–µ–¥–µ–ª—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –§–∞–∑–∞ 7: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–û—Ü–µ–Ω–∫–∞: 2-3 —á–∞—Å–∞**

1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - Try-catch –±–ª–æ–∫–∏ –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

2. –ö–æ–º–∞–Ω–¥—ã help –∏ start
   - –ö–æ–º–∞–Ω–¥–∞ `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - –ö–æ–º–∞–Ω–¥–∞ `/help` - –ø–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (–¥–µ—Å–∫—Ç–æ–ø/–º–æ–±–∏–ª—å–Ω—ã–π Telegram)

### –§–∞–∑–∞ 8: –î–µ–ø–ª–æ–π (–ø–æ—Å–ª–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
**–û—Ü–µ–Ω–∫–∞: 1-2 —á–∞—Å–∞**

1. –í—ã–±–æ—Ä —Ö–æ—Å—Ç–∏–Ω–≥–∞ (VPS/Heroku/Railway/etc.)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –î–µ–ø–ª–æ–π –±–æ—Ç–∞
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (systemd/supervisor)
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 19-27 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)

```
python-telegram-bot==20.7
APScheduler==3.10.4
openpyxl==3.1.2
python-dotenv==1.0.0
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –î–∏–∑–∞–π–Ω —É—Ç–≤–µ—Ä–∂–¥–µ–Ω
2. üîú –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. üîú –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
4. üîú –ù–∞—á–∞–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –§–∞–∑—ã 1

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (Post-MVP)

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∫ —Ñ—Ä–∞–∑–∞–º
- –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–≤–∏–∑—ã (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏)
- Spaced Repetition System (SRS) –∞–ª–≥–æ—Ä–∏—Ç–º –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è (—É—Ä–æ–≤–Ω–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ª–∏–¥–µ—Ä–±–æ—Ä–¥—ã)
- –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ Anki
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ –æ–±—É—á–µ–Ω–∏—è
- Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ —Å–ª–æ–≤–∞–º
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–ª–æ–≤
